import pandas as pdfrom sklearn.decomposition import PCAfrom sklearn.preprocessing import StandardScalerimport matplotlib.pyplot as plt# Dadosdata = {    'Tratamento': ['FOLHA', 'GRAMA', 'PALHA', 'SERRAGEM', 'FOLHA E GRAMA', 'FOLHA E PALHA', 'PALHA E GRAMA'],    'N': [21.2, 30.66, 14.11, 5.66, 24.39, 15.51, 21.22],    'P': [0.89, 1.8, 1.08, 0.33, 1.53, 0.91, 1.46],    'K': [1.56, 3.12, 3.12, 1.56, 1.95, 2.34, 2.34],    'Ca': [17.85, 11.79, 14.37, 2.39, 16.79, 15.16, 12.72],    'Mg': [2.83, 6.74, 4.01, 1.09, 5.37, 3.33, 6.23],    'S': [1.69, 4.11, 2.67, 0.5, 2.86, 1.62, 3.51],    'B': [25.37, 14.81, 20.65, 7.32, 22.04, 18.98, 18.15],    'Cu': [8.87, 17.34, 7.04, 2.87, 10.2, 8.02, 11.21],    'Fe': [3714.58, 8727.16, 10671.85, 1852.45, 3678.53, 3222.45, 8990.97],    'Mn': [216.71, 646.26, 100.15, 29.88, 444.12, 122.31, 487.7],    'Zn': [160.72, 175.54, 113.69, 66.78, 131.14, 125.42, 174.2]}df = pd.DataFrame(data)tratamentos = df['Tratamento']df.set_index('Tratamento', inplace=True)# Normalizar os dadosscaler = StandardScaler()data_scaled = scaler.fit_transform(df)# PCApca = PCA()pca_result = pca.fit_transform(data_scaled)# Variância explicadaexplained_var = pca.explained_variance_ratio_# Plotar gráfico de variância explicadaplt.figure(figsize=(8, 6))plt.bar(range(1, len(explained_var) + 1), explained_var, alpha=0.8, align='center', label='Variância Explicada')plt.step(range(1, len(explained_var) + 1), explained_var.cumsum(), where='mid', label='Variância Cumulativa')plt.title('Variância Explicada pela PCA')plt.xlabel('Número de Componentes Principais')plt.ylabel('Proporção da Variância Explicada')plt.legend()plt.show()
